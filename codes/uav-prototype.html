<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>无人机环境监测平台 · 可视化前端原型（交付版）</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Noto+Sans+SC:wght@400;500;700&display=swap"
    />
    <style>
      :root {
        font-size: 16px;
        color-scheme: light;
        --primary: #0066ff;
        --primary-dark: #00338f;
        --primary-light: #edf2ff;
        --text: #111827;
        --muted: #475467;
        --border: #e4e7ec;
        --card: #ffffff;
        --bg: #f5f7fb;
        --accent-green: #16a34a;
        --accent-orange: #fb923c;
        --accent-pink: #ec4899;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: 'Noto Sans SC', 'Roboto', 'Segoe UI', system-ui, -apple-system,
          BlinkMacSystemFont, 'PingFang SC', 'Microsoft Yahei', sans-serif;
        background: var(--bg);
        color: var(--text);
      }

      header {
        background: linear-gradient(130deg, #051840, #0066ff);
        color: #fff;
        padding: 36px 52px 44px;
        position: sticky;
        top: 0;
        z-index: 10;
        box-shadow: 0 10px 30px rgba(5, 24, 64, 0.35);
      }

      header h1 {
        margin: 0 0 10px;
        font-size: 2.1rem;
      }

      header p {
        margin: 0;
        max-width: 960px;
        opacity: 0.92;
      }

      .layout {
        display: flex;
      }

      nav {
        width: 260px;
        background: #fff;
        border-right: 1px solid var(--border);
        min-height: calc(100vh - 120px);
        position: sticky;
        top: 120px;
        align-self: flex-start;
      }

      .nav-title {
        padding: 18px 24px;
        border-bottom: 1px solid var(--border);
      }

      .nav-title strong {
        color: var(--primary);
        display: block;
        margin-bottom: 4px;
      }

      nav ul {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      nav li {
        border-bottom: 1px solid var(--border);
      }

      nav a {
        display: block;
        padding: 14px 26px;
        text-decoration: none;
        color: var(--muted);
        font-weight: 500;
        transition: all 0.2s;
      }

      nav a:hover,
      nav a.active {
        background: var(--primary-light);
        color: var(--primary);
      }

      main {
        flex: 1;
        padding: 36px 48px 64px;
        display: flex;
        flex-direction: column;
        gap: 32px;
      }

      section h2 {
        margin: 0 0 18px;
        font-size: 1.55rem;
        color: var(--primary-dark);
        display: flex;
        gap: 12px;
        align-items: center;
      }

      section h2 span {
        font-size: 0.95rem;
        background: var(--primary-light);
        color: var(--primary);
        padding: 4px 10px;
        border-radius: 8px;
      }

      .grid {
        display: grid;
        gap: 18px;
      }

      .grid.two {
        grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
      }

      .grid.three {
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      }

      .card {
        background: var(--card);
        border-radius: 18px;
        padding: 22px 24px;
        border: 1px solid var(--border);
        box-shadow: 0 14px 36px rgba(15, 23, 42, 0.08);
      }

      .card h3 {
        margin: 0 0 12px;
        font-size: 1.15rem;
      }

      .card p {
        margin: 0 0 12px;
        line-height: 1.6;
        color: var(--muted);
      }

      .card ul {
        margin: 0 0 0 20px;
        padding: 0;
      }

      .card li {
        margin-bottom: 6px;
        line-height: 1.55;
      }

      .kpi-grid {
        display: grid;
        gap: 16px;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }

      .kpi {
        background: var(--card);
        border-radius: 16px;
        padding: 16px;
        border: 1px solid var(--border);
        display: flex;
        flex-direction: column;
        gap: 6px;
        box-shadow: inset 0 0 0 1px rgba(0, 102, 255, 0.08);
      }

      .kpi span {
        font-size: 0.85rem;
        color: var(--muted);
      }

      .kpi strong {
        font-size: 1.7rem;
        color: var(--text);
      }

      .pill {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 4px 10px;
        border-radius: 999px;
        background: var(--primary-light);
        color: var(--primary);
        font-size: 0.85rem;
        margin-right: 6px;
        margin-top: 2px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.9rem;
      }

      th,
      td {
        padding: 10px;
        border-bottom: 1px solid var(--border);
        text-align: left;
      }

      th {
        color: var(--muted);
        text-transform: uppercase;
        font-size: 0.8rem;
      }

      .status {
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 0.78rem;
        display: inline-block;
      }

      .status.good {
        background: rgba(22, 163, 74, 0.16);
        color: var(--accent-green);
      }

      .status.warn {
        background: rgba(251, 146, 60, 0.2);
        color: var(--accent-orange);
      }

      .status.critical {
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
      }

      .map-placeholder {
        border-radius: 16px;
        height: 200px;
        border: 1px dashed var(--primary);
        background: linear-gradient(135deg, #e0f2ff, #ffe4f3);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--muted);
        font-size: 0.95rem;
      }

      .tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 14px;
      }

      .tab-btn {
        padding: 8px 16px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: #fff;
        cursor: pointer;
        font-size: 0.9rem;
      }

      .tab-btn.active {
        background: var(--primary);
        color: #fff;
        border-color: var(--primary);
      }

      .tab-panel {
        display: none;
      }

      .tab-panel.active {
        display: block;
      }

      .api-table {
        font-size: 0.88rem;
      }

      .api-table th:nth-child(1),
      .api-table td:nth-child(1) {
        width: 160px;
        font-family: 'Roboto Mono', 'Courier New', monospace;
      }

      footer {
        text-align: center;
        padding: 28px;
        color: var(--muted);
      }

      @media (max-width: 1024px) {
        nav {
          display: none;
        }

        header {
          position: static;
        }

        .layout {
          flex-direction: column;
        }

        main {
          padding: 28px;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>无人机环境监测平台 · 可视化前端原型（交付版）</h1>
      <p>
        交付物模拟正式产品的第一版 UI：左侧模块导航，右侧展示功能视图，全部数据采用前端模拟数据。页面底部附带“只读数据接口草案”，
        便于后续对接服务端。此版本可作为设计/产品评审基础，之后再按反馈微调。
      </p>
    </header>

    <div class="layout">
      <nav>
        <div class="nav-title">
          <strong>平台模块</strong>
          <span>可点击滚动定位</span>
        </div>
        <ul>
          <li><a href="#dashboard" class="active">运营驾驶舱</a></li>
          <li><a href="#fleet">无人机中心</a></li>
          <li><a href="#missions">任务指挥</a></li>
          <li><a href="#monitoring">实时监测</a></li>
          <li><a href="#datahub">数据枢纽</a></li>
          <li><a href="#analytics">分析洞察</a></li>
          <li><a href="#iam">访问治理</a></li>
          <li><a href="#ops">运维与安全</a></li>
          <li><a href="#api">模拟数据 &amp; API</a></li>
        </ul>
      </nav>

      <main>
        <section id="dashboard">
          <h2>运营驾驶舱 <span>实时概览 / 告警 / 数据吞吐</span></h2>
          <div class="kpi-grid">
            <div class="kpi">
              <span>在线无人机</span>
              <strong>42</strong>
              <div class="pill">森林 18</div>
            </div>
            <div class="kpi">
              <span>执行中任务</span>
              <strong>18</strong>
              <div class="pill">高优 6</div>
            </div>
            <div class="kpi">
              <span>今日预警</span>
              <strong>9</strong>
              <div class="pill" style="background: rgba(239, 68, 68, 0.15); color: #ef4444"
                >警报 2</div
              >
            </div>
            <div class="kpi">
              <span>数据吞吐（帧/日）</span>
              <strong>38 万</strong>
              <div class="pill">传感器峰值 14:00</div>
            </div>
          </div>
          <div class="grid two" style="margin-top: 20px">
            <div class="card">
              <h3>任务状态分布</h3>
              <div id="missionChart" style="height: 260px"></div>
            </div>
            <div class="card">
              <h3>遥测 &amp; 传感器趋势</h3>
              <div id="telemetryChart" style="height: 260px"></div>
            </div>
          </div>
          <div class="card" style="margin-top: 20px">
            <h3>地理总览</h3>
            <div class="map-placeholder">
              模拟地图：在线机位 42 / 热点任务 8 · 可接入 Mapbox GL JS 展示航线、热力层与告警点
            </div>
          </div>
        </section>

        <section id="fleet">
          <h2>无人机中心 <span>注册 / 审批 / 在线状态</span></h2>
          <div class="grid two">
            <div class="card">
              <h3>注册表单（示例）</h3>
              <p>审批流：录入 → 协议校验 → 管理批准；支持批量导入 &amp; API 注册。</p>
              <div class="grid two" style="gap: 12px">
                <label>
                  <span>编号</span>
                  <input type="text" placeholder="UAV-2024-021" />
                </label>
                <label>
                  <span>机型</span>
                  <input type="text" placeholder="多旋翼 / 固定翼" />
                </label>
                <label>
                  <span>载荷组合</span>
                  <select multiple>
                    <option>多光谱</option>
                    <option>热成像</option>
                    <option>气体/颗粒物</option>
                    <option>可见光</option>
                  </select>
                </label>
                <label>
                  <span>通信模块</span>
                  <select multiple>
                    <option>4G</option>
                    <option>5G</option>
                    <option>WiFi</option>
                  </select>
                </label>
                <label>
                  <span>飞控型号</span>
                  <input type="text" placeholder="PX4 v1.13" />
                </label>
                <label>
                  <span>最大航时</span>
                  <input type="text" placeholder="90 min" />
                </label>
                <label>
                  <span>审批阶段</span>
                  <select>
                    <option>运营录入</option>
                    <option>技术审核</option>
                    <option>管理员批准</option>
                  </select>
                </label>
                <label>
                  <span>附件</span>
                  <input type="text" placeholder="合规文件链接" />
                </label>
              </div>
              <div style="margin-top: 12px; display: flex; gap: 10px">
                <button>提交审批</button>
                <button class="pill" style="cursor: pointer; border: none">导入 CSV</button>
                <button class="pill" style="cursor: pointer; border: none">下载 SDK</button>
              </div>
            </div>
            <div class="card">
              <h3>在线状态监控（模拟数据）</h3>
              <table>
                <thead>
                  <tr>
                    <th>无人机</th>
                    <th>任务</th>
                    <th>电量</th>
                    <th>链路</th>
                    <th>状态</th>
                  </tr>
                </thead>
                <tbody id="fleetTable"></tbody>
              </table>
              <p>支持区域/任务过滤；链路监控展示心跳延迟、重试次数，高风险状态推送至运维。</p>
            </div>
          </div>
        </section>

        <section id="missions">
          <h2>任务指挥 <span>建模 / 航线 / 执行监控</span></h2>
          <div class="grid two">
            <div class="card">
              <h3>任务建模</h3>
              <div class="grid two" style="gap: 12px">
                <label>
                  <span>任务类型</span>
                  <select>
                    <option>林业健康</option>
                    <option>火情巡查</option>
                    <option>城市热岛</option>
                    <option>空气质量剖面</option>
                    <option>土地利用复拍</option>
                  </select>
                </label>
                <label>
                  <span>模板</span>
                  <select>
                    <option>林业 · 栅格扫描</option>
                    <option>火情 · 快速扇形</option>
                    <option>热岛 · 分时采样</option>
                  </select>
                </label>
                <label>
                  <span>执行窗口</span>
                  <input type="text" placeholder="2024-06-15 08:00 ~ 12:00" />
                </label>
                <label>
                  <span>优先级</span>
                  <select>
                    <option>高</option>
                    <option>中</option>
                    <option>低</option>
                  </select>
                </label>
                <label>
                  <span>传感器组合</span>
                  <select multiple>
                    <option>多光谱</option>
                    <option>热成像</option>
                    <option>气体分析</option>
                  </select>
                </label>
                <label>
                  <span>负责人</span>
                  <input type="text" placeholder="张三 / 李四" />
                </label>
              </div>
              <textarea rows="4" style="width: 100%; margin-top: 12px" placeholder="任务描述 / 处置策略 / 预警阈值"></textarea>
              <div style="margin-top: 12px; display: flex; gap: 10px">
                <button>保存任务</button>
                <button class="pill" style="cursor: pointer; border: none">另存模板</button>
              </div>
            </div>
            <div class="card">
              <h3>航线规划（占位）</h3>
              <div class="map-placeholder">地图画多边形 → 生成航线 → 可微调航点/速度/高度分段</div>
              <ul style="margin-top: 12px">
                <li>支持禁飞区避让、地形跟随、航线版本管理。</li>
                <li>最新版本：V5 · 由李四于 09:12 更新，可回滚 V4。</li>
                <li>下发指令 `StartMission` / `UploadMission` / `ConfigureSensor`，执行进度订阅 `MissionStatus`。</li>
              </ul>
            </div>
          </div>
          <div class="grid two">
            <div class="card">
              <h3>任务执行监控</h3>
              <ul>
                <li>状态：执行中 · 进度 58%</li>
                <li>里程碑：起飞 → 到达作业区 → 采集 60% → 告警：电量 35% → 返航。</li>
                <li>控制：强制终止 / 返航 / 暂停 / 重试。</li>
                <li>完成后自动生成简报（路径 + 数据量 + 告警摘要）。</li>
              </ul>
              <div style="margin-top: 12px">
                <button>强制终止</button>
                <button class="pill" style="cursor: pointer; border: none">返航</button>
                <button class="pill" style="cursor: pointer; border: none">暂停</button>
              </div>
            </div>
            <div class="card">
              <h3>任务列表（模拟）</h3>
              <table>
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>类型</th>
                    <th>状态</th>
                    <th>负责人</th>
                    <th>进度</th>
                  </tr>
                </thead>
                <tbody id="missionTable"></tbody>
              </table>
            </div>
          </div>
        </section>

        <section id="monitoring">
          <h2>实时监测 <span>大屏 / 规则 / 告警处置</span></h2>
          <div class="grid two">
            <div class="card">
              <h3>多数据大屏</h3>
              <div class="grid three">
                <div class="kpi">
                  <span>温度 (°C)</span>
                  <strong>32.8</strong>
                  <div class="pill">平滑</div>
                </div>
                <div class="kpi">
                  <span>湿度 (%)</span>
                  <strong>48</strong>
                  <div class="pill">原始</div>
                </div>
                <div class="kpi">
                  <span>PM2.5</span>
                  <strong>85</strong>
                  <div class="pill" style="background: rgba(251, 146, 60, 0.2); color: var(--accent-orange)"
                    >超阈</div
                  >
                </div>
              </div>
              <div id="envChart" style="height: 230px; margin-top: 18px"></div>
              <p>支持自定义卡片/曲线/仪表/热力层布局；原始&平滑切换；关键点打标签供历史回放。</p>
            </div>
            <div class="card">
              <h3>规则配置 &amp; AI 触发</h3>
              <div class="grid two" style="gap: 12px">
                <label>
                  <span>场景</span>
                  <select>
                    <option>森林火情</option>
                    <option>空气质量</option>
                    <option>林业健康</option>
                  </select>
                </label>
                <label>
                  <span>指标</span>
                  <select>
                    <option>地表温度</option>
                    <option>烟雾概率</option>
                    <option>PM2.5</option>
                    <option>NDVI</option>
                  </select>
                </label>
                <label>
                  <span>阈值/持续</span>
                  <input type="text" placeholder="> 60°C & 5min" />
                </label>
                <label>
                  <span>级别</span>
                  <select>
                    <option>提示</option>
                    <option>预警</option>
                    <option>警报</option>
                  </select>
                </label>
                <label>
                  <span>通知渠道</span>
                  <select multiple>
                    <option>短信</option>
                    <option>App</option>
                    <option>Webhook</option>
                    <option>邮件</option>
                  </select>
                </label>
                <label>
                  <span>组合条件</span>
                  <input type="text" placeholder="温度>60∧湿度<30∧电量>40" />
                </label>
              </div>
              <div style="margin-top: 12px; display: flex; gap: 10px">
                <button>保存</button>
                <button class="pill" style="cursor: pointer; border: none">启用 AI 模型</button>
              </div>
              <p>规则存入规则引擎，支持 JSON DSL；AI 模型结果可触发同一预警通道。</p>
            </div>
          </div>
          <div class="grid two">
            <div class="card">
              <h3>告警工作台</h3>
              <table>
                <thead>
                  <tr>
                    <th>告警</th>
                    <th>级别</th>
                    <th>位置</th>
                    <th>状态</th>
                    <th>操作</th>
                  </tr>
                </thead>
                <tbody id="alertTable"></tbody>
              </table>
              <p>支持确认/转派/关闭，记录处置意见与附件；可直接跳转到数据帧/图像。</p>
            </div>
            <div class="card">
              <h3>连接健康可视化</h3>
              <p>展示心跳延迟、重试次数、链路质量热力；支持订阅过滤、运维推送。</p>
              <div class="map-placeholder">链路质量热力图 · 模拟</div>
            </div>
          </div>
        </section>

        <section id="datahub">
          <h2>数据枢纽 <span>模型 / 存储 / 导出</span></h2>
          <div class="grid two">
            <div class="card">
              <h3>数据模型概览</h3>
              <ul>
                <li>遥测流：时间、坐标、姿态、速度、电量、链路、任务 ID、质量标记。</li>
                <li>传感器流：温湿度、气体/颗粒物、单位、场景字段、质量状态。</li>
                <li>图像元数据：影像类型、多光谱/热成像参数、分辨率、GSD、航迹。</li>
                <li>任务元数据：区域（GeoJSON/PostGIS）、传感器配置、采样周期、模板。</li>
                <li>快照：任务完成后打包，支持版本化、复现分析。</li>
              </ul>
            </div>
            <div class="card">
              <h3>存储与处理策略</h3>
              <ul>
                <li>结构化：PostgreSQL + PostGIS；时序：TimescaleDB / InfluxDB；对象：MinIO / S3。</li>
                <li>冷热分层：近 3 个月存主库，历史转冷存储，可按需拉回。</li>
                <li>ETL：Airflow + Spark/Flink · 压缩、去噪、坐标纠偏。</li>
                <li>开放 API：CSV / GeoJSON / GeoPackage / 影像包，支持预签名 URL。</li>
              </ul>
            </div>
          </div>
          <div class="card">
            <h3>数据检索 &amp; 快照</h3>
            <div class="grid two" style="gap: 12px">
              <label>
                <span>任务/场景</span>
                <select>
                  <option>全部</option>
                  <option>林业健康</option>
                  <option>火情监测</option>
                  <option>空气质量</option>
                </select>
              </label>
              <label>
                <span>时间范围</span>
                <input type="text" placeholder="2024-05-01 ~ 2024-05-31" />
              </label>
              <label>
                <span>区域</span>
                <input type="text" placeholder="GeoJSON / 行政区" />
              </label>
              <label>
                <span>导出格式</span>
                <select>
                  <option>CSV</option>
                  <option>GeoJSON</option>
                  <option>影像打包</option>
                  <option>GeoPackage</option>
                </select>
              </label>
            </div>
            <div style="margin-top: 12px; display: flex; gap: 10px">
              <button>检索数据</button>
              <button class="pill" style="cursor: pointer; border: none">生成快照</button>
              <button class="pill" style="cursor: pointer; border: none">创建 API Token</button>
            </div>
          </div>
        </section>

        <section id="analytics">
          <h2>分析洞察 <span>专题分析 / 报告 / 图层</span></h2>
          <div class="tabs">
            <button class="tab-btn active" data-tab="forest">林业健康</button>
            <button class="tab-btn" data-tab="fire">火情监测</button>
            <button class="tab-btn" data-tab="heat">城市热岛</button>
            <button class="tab-btn" data-tab="air">空气质量</button>
            <button class="tab-btn" data-tab="land">土地变化</button>
          </div>
          <div class="card tab-panel active" id="forest">
            <h3>林业健康分析</h3>
            <ul>
              <li>多光谱计算 NDVI/EVI；生成植被热力、病害疑似区域。</li>
              <li>多时相对比、差值图；自动巡检报告（变化面积/严重度）。</li>
            </ul>
            <div id="forestChart" style="height: 230px"></div>
          </div>
          <div class="card tab-panel" id="fire">
            <h3>火情监测分析</h3>
            <ul>
              <li>热成像高温点、烟雾识别叠加地图；时间轴播放火情发展。</li>
              <li>火点轨迹推演、蔓延预测（考虑风速/风向/历史温度梯度）。</li>
            </ul>
            <div class="map-placeholder">火点轨迹模拟</div>
          </div>
          <div class="card tab-panel" id="heat">
            <h3>城市热岛分析</h3>
            <ul>
              <li>地表温度分布；昼夜 / 工作日 vs 周末对比。</li>
              <li>联动地面气象站，展示差异与极值。</li>
            </ul>
            <div id="heatChart" style="height: 230px"></div>
          </div>
          <div class="card tab-panel" id="air">
            <h3>空气质量分析</h3>
            <ul>
              <li>垂直剖面曲线（高度 vs 浓度）、平面等值线/热力图。</li>
              <li>多任务、多时间段对比；阈值带和极值标注。</li>
            </ul>
            <div id="airChart" style="height: 230px"></div>
          </div>
          <div class="card tab-panel" id="land">
            <h3>土地利用变化</h3>
            <ul>
              <li>多时相影像对比，变化区域高亮，类型标注（林地→建设）。</li>
              <li>统计报表、导出 GeoPackage 供 GIS 使用。</li>
            </ul>
            <div class="map-placeholder">变化检测示意</div>
          </div>
        </section>

        <section id="iam">
          <h2>访问治理 <span>多租户 / RBAC / 审计</span></h2>
          <div class="grid two">
            <div class="card">
              <h3>租户与角色</h3>
              <table>
                <thead>
                  <tr>
                    <th>租户</th>
                    <th>角色</th>
                    <th>权限范围</th>
                    <th>二次验证</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>林区 A</td>
                    <td>任务管理员</td>
                    <td>任务、告警、下发指令</td>
                    <td>启用</td>
                  </tr>
                  <tr>
                    <td>科研所 B</td>
                    <td>数据分析师</td>
                    <td>数据导出、分析接口</td>
                    <td>邮件验证码</td>
                  </tr>
                  <tr>
                    <td>第三方 C</td>
                    <td>API 读者</td>
                    <td>只读 API</td>
                    <td>OAuth2 Client</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="card">
              <h3>审计日志</h3>
              <ul>
                <li>记录任务下发、数据导出、删除等操作，存储至 Elasticsearch。</li>
                <li>提供检索、导出、告警能力；支持多租户隔离、Keycloak/OIDC 登录。</li>
                <li>日志字段：操作人、租户、动作、资源、参数、时间、IP、结果。</li>
              </ul>
              <div class="map-placeholder">审计时序图（模拟）</div>
            </div>
          </div>
        </section>

        <section id="ops">
          <h2>运维与安全 <span>架构 / 部署 / 安全加固</span></h2>
          <div class="grid two">
            <div class="card">
              <h3>架构概览</h3>
              <ul>
                <li>前端：React + TS + Vite + Mapbox GL JS + ECharts。</li>
                <li>网关：Nginx/Traefik + Spring Cloud Gateway；对外 REST &amp; WebSocket。</li>
                <li>服务：接入、任务、数据、分析、IAM、告警、通知、规则引擎。</li>
                <li>消息：MQTT Broker (EMQX) + Kafka；图像经对象存储；AI 服务基于 FastAPI + ONNX Runtime。</li>
              </ul>
            </div>
            <div class="card">
              <h3>部署 &amp; 安全</h3>
              <ul>
                <li>Kubernetes + GitLab CI/GitHub Actions + ArgoCD；Keda 自动扩缩容。</li>
                <li>监控：Prometheus + Grafana；日志：Loki/ELK；链路：Jaeger。</li>
                <li>安全：OAuth2.1 + JWT、mTLS、TLS1.2+、HashiCorp Vault 密钥。</li>
                <li>备份 &amp; 容灾：数据库快照、MinIO 版本化、双活/容灾方案。</li>
              </ul>
            </div>
          </div>
        </section>

        <section id="api">
          <h2>模拟数据 &amp; API 草案 <span>只读接口</span></h2>
          <div class="card">
            <h3>数据契约概览</h3>
            <p>下表列出前端原型使用的主要数据实体及只读接口设计（RESTful）。示例 payload 均为模拟数据，可与真实服务对接时替换。</p>
            <table class="api-table">
              <thead>
                <tr>
                  <th>GET 接口</th>
                  <th>描述 / 关键字段</th>
                  <th>示例响应（截断）</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>/api/mock/fleet</td>
                  <td>
                    无人机列表：uavId、model、missionName、battery、link.rtt、status
                  </td>
                  <td>
                    [{ "uavId": "UAV-21", "missionName": "林业-A01", "battery": 0.78, "link": { "rtt": 0.12, "quality": "strong" }, "status": "online" }, ...]
                  </td>
                </tr>
                <tr>
                  <td>/api/mock/missions</td>
                  <td>
                    任务清单：missionId、type、status、owner、progress、priority、window
                  </td>
                  <td>
                    [{ "missionId": "M-20240601", "type": "火情巡查", "status": "running", "progress": 0.45 }, ...]
                  </td>
                </tr>
                <tr>
                  <td>/api/mock/telemetry</td>
                  <td>
                    遥测 / 传感器曲线：timestamps、temperature、humidity、pm25、battery
                  </td>
                  <td>
                    { "timestamps": ["08:00","08:10",...], "temperature": [30,31.5,...], "pm25": [60,80,...] }
                  </td>
                </tr>
                <tr>
                  <td>/api/mock/alerts</td>
                  <td>
                    告警队列：alertId、title、level、location、status、actions
                  </td>
                  <td>
                    [{ "alertId": "AL-9801", "title": "烟雾概率 0.86", "level": "critical", "location": "31.28,121.52", "status": "pending" }, ...]
                  </td>
                </tr>
                <tr>
                  <td>/api/mock/datasets</td>
                  <td>
                    数据检索结果：datasetId、missionId、type、timeRange、downloadUrl
                  </td>
                  <td>
                    [{ "datasetId": "DS-1021", "missionId": "M-20240528", "type": "GeoJSON", "downloadUrl": "https://example/signed" }, ...]
                  </td>
                </tr>
                <tr>
                  <td>/api/mock/analysis</td>
                  <td>
                    分析数据：topic（NDVI/Heat/PMProfile）、series、自定义维度
                  </td>
                  <td>
                    { "topic": "ndvi", "series": [{ "label": "当前", "data": [0.68,0.65,0.6,0.63] }, ...] }
                  </td>
                </tr>
                <tr>
                  <td>/api/mock/iam/logs</td>
                  <td>
                    审计日志：logId、tenant、user、action、resource、timestamp
                  </td>
                  <td>
                    [{ "logId": "LOG-1001", "action": "EXPORT_DATA", "resource": "mission:M-20240528" }, ...]
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </main>
    </div>

    <footer>© 2024 无人机环境监测平台 · 模拟前端原型（仅限演示）</footer>

    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script>
      const navLinks = document.querySelectorAll('nav a');
      const sections = document.querySelectorAll('main section');
      const observer = new IntersectionObserver(
        entries => {
          entries.forEach(entry => {
            const id = entry.target.getAttribute('id');
            const link = document.querySelector(`nav a[href="#${id}"]`);
            if (link && entry.isIntersecting) {
              navLinks.forEach(a => a.classList.remove('active'));
              link.classList.add('active');
            }
          });
        },
        { threshold: 0.35 }
      );
      sections.forEach(section => observer.observe(section));
      navLinks.forEach(link => {
        link.addEventListener('click', e => {
          const href = link.getAttribute('href');
          if (href.startsWith('#')) {
            const target = document.querySelector(href);
            if (target) {
              e.preventDefault();
              target.scrollIntoView({ behavior: 'smooth' });
            }
          }
        });
      });

      const mockFleet = [
        { uavId: 'UAV-21', mission: '林业-A01', battery: 78, link: '优 · RTT 120ms', status: 'online' },
        { uavId: 'UAV-09', mission: '火情-北段', battery: 38, link: '弱 · 重试 3', status: 'alert' },
        { uavId: 'UAV-33', mission: '空气质量剖面', battery: 56, link: '良', status: 'online' },
        { uavId: 'UAV-12', mission: '土地监测', battery: 64, link: '优', status: 'online' }
      ];
      const fleetTable = document.getElementById('fleetTable');
      fleetTable.innerHTML = mockFleet
        .map(
          item => `
        <tr>
          <td>${item.uavId}</td>
          <td>${item.mission}</td>
          <td>${item.battery}%</td>
          <td>${item.link}</td>
          <td><span class="status ${item.status === 'alert' ? 'critical' : 'good'}">${item.status === 'alert' ? '链路弱' : '在线'}</span></td>
        </tr>`
        )
        .join('');

      const mockMissions = [
        { id: 'M-20240601', type: '火情巡查', status: '执行中', owner: '李四', progress: '45%' },
        { id: 'M-20240602', type: '空气质量', status: '排队', owner: '张三', progress: '待下发' },
        { id: 'M-20240528', type: '土地变化', status: '完成', owner: '王五', progress: '报告生成' }
      ];
      const missionTable = document.getElementById('missionTable');
      missionTable.innerHTML = mockMissions
        .map(
          item => `
        <tr>
          <td>${item.id}</td>
          <td>${item.type}</td>
          <td>${item.status}</td>
          <td>${item.owner}</td>
          <td>${item.progress}</td>
        </tr>`
        )
        .join('');

      const mockAlerts = [
        { title: '烟雾概率 0.86', level: 'critical', location: 'N31.28·E121.52', status: '待确认' },
        { title: 'PM2.5 达 120', level: 'warn', location: 'N29.72·E118.91', status: '处理中' },
        { title: 'NDVI 低于 0.3', level: 'good', location: 'N34.12·E109.32', status: '已关闭' }
      ];
      const alertTable = document.getElementById('alertTable');
      alertTable.innerHTML = mockAlerts
        .map(
          item => `
        <tr>
          <td>${item.title}</td>
          <td><span class="status ${item.level === 'critical' ? 'critical' : item.level === 'warn' ? 'warn' : 'good'}">${item.level}</span></td>
          <td>${item.location}</td>
          <td>${item.status}</td>
          <td><button class="pill" style="cursor:pointer;border:none">操作</button></td>
        </tr>`
        )
        .join('');

      const missionChart = echarts.init(document.getElementById('missionChart'));
      missionChart.setOption({
        tooltip: { trigger: 'axis' },
        legend: {},
        xAxis: {
          type: 'category',
          data: ['林业', '火情', '热岛', '空气质量', '土地变化'],
          axisLabel: { interval: 0 }
        },
        yAxis: { type: 'value', name: '任务数' },
        series: [
          {
            name: '执行中',
            type: 'bar',
            stack: 'status',
            itemStyle: { color: '#0066ff' },
            data: [4, 6, 3, 2, 3]
          },
          {
            name: '待下发',
            type: 'bar',
            stack: 'status',
            itemStyle: { color: '#16a34a' },
            data: [2, 1, 1, 3, 1]
          },
          {
            name: '异常',
            type: 'bar',
            stack: 'status',
            itemStyle: { color: '#ef4444' },
            data: [0, 1, 0, 0, 1]
          }
        ]
      });

      const telemetryChart = echarts.init(document.getElementById('telemetryChart'));
      telemetryChart.setOption({
        tooltip: { trigger: 'axis' },
        legend: {},
        xAxis: { type: 'category', data: ['08:00', '08:10', '08:20', '08:30', '08:40', '08:50', '09:00'] },
        yAxis: [
          { type: 'value', name: '温度 °C' },
          { type: 'value', name: 'PM2.5', position: 'right' }
        ],
        series: [
          {
            name: '温度',
            type: 'line',
            smooth: true,
            data: [30, 31.5, 32.2, 33, 32.5, 31.8, 31],
            itemStyle: { color: '#f97316' }
          },
          {
            name: '湿度',
            type: 'line',
            smooth: true,
            data: [52, 50, 48, 46, 45, 44, 46],
            itemStyle: { color: '#0ea5e9' }
          },
          {
            name: 'PM2.5',
            type: 'bar',
            yAxisIndex: 1,
            data: [60, 65, 80, 90, 85, 70, 68],
            itemStyle: { color: '#ef4444', opacity: 0.5 }
          }
        ]
      });

      const envChart = echarts.init(document.getElementById('envChart'));
      envChart.setOption({
        tooltip: { trigger: 'axis' },
        legend: { data: ['原始', '平滑'] },
        xAxis: { type: 'category', data: Array.from({ length: 12 }, (_, i) => `采样${i + 1}`) },
        yAxis: { type: 'value', name: '指标' },
        series: [
          {
            name: '原始',
            type: 'line',
            data: [32, 33, 34, 30, 29, 31, 35, 37, 36, 33, 32, 31],
            lineStyle: { type: 'dashed' }
          },
          {
            name: '平滑',
            type: 'line',
            data: [32, 33, 33, 32, 31, 32, 34, 35, 34, 33, 32, 31],
            areaStyle: { opacity: 0.2 }
          }
        ]
      });

      const forestChart = echarts.init(document.getElementById('forestChart'));
      forestChart.setOption({
        tooltip: { trigger: 'axis' },
        legend: {},
        xAxis: { type: 'category', data: ['Q1', 'Q2', 'Q3', 'Q4'] },
        yAxis: { type: 'value', name: 'NDVI' },
        series: [
          {
            name: '当前',
            type: 'line',
            data: [0.68, 0.65, 0.6, 0.63],
            smooth: true,
            itemStyle: { color: '#16a34a' }
          },
          {
            name: '对比年度',
            type: 'line',
            data: [0.7, 0.69, 0.66, 0.68],
            smooth: true,
            itemStyle: { color: '#9ca3af' }
          }
        ]
      });

      const heatChart = echarts.init(document.getElementById('heatChart'));
      heatChart.setOption({
        tooltip: { trigger: 'axis' },
        legend: {},
        xAxis: { type: 'category', data: ['06:00', '12:00', '18:00', '00:00'] },
        yAxis: { type: 'value', name: '地表温度 °C' },
        series: [
          {
            name: '工作日',
            type: 'line',
            data: [28, 36, 31, 27],
            itemStyle: { color: '#f59e0b' }
          },
          {
            name: '周末',
            type: 'line',
            data: [27, 34, 30, 26],
            itemStyle: { color: '#2563eb' }
          }
        ]
      });

      const airChart = echarts.init(document.getElementById('airChart'));
      airChart.setOption({
        tooltip: { trigger: 'axis' },
        legend: {},
        xAxis: { type: 'value', name: '浓度 μg/m³' },
        yAxis: {
          type: 'category',
          data: ['50m', '150m', '300m', '500m', '800m', '1000m'],
          inverse: true
        },
        series: [
          {
            name: 'PM2.5',
            type: 'line',
            data: [120, 90, 70, 55, 40, 35],
            areaStyle: { opacity: 0.2 }
          },
          {
            name: 'O₃',
            type: 'line',
            data: [80, 92, 95, 100, 110, 120],
            areaStyle: { opacity: 0.15 }
          }
        ]
      });

      window.addEventListener('resize', () => {
        missionChart.resize();
        telemetryChart.resize();
        envChart.resize();
        forestChart.resize();
        heatChart.resize();
        airChart.resize();
      });

      const tabButtons = document.querySelectorAll('.tab-btn');
      const tabPanels = document.querySelectorAll('.tab-panel');
      tabButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          tabButtons.forEach(b => b.classList.remove('active'));
          tabPanels.forEach(p => p.classList.remove('active'));
          btn.classList.add('active');
          document.getElementById(btn.dataset.tab).classList.add('active');
          if (btn.dataset.tab === 'forest') forestChart.resize();
          if (btn.dataset.tab === 'heat') heatChart.resize();
          if (btn.dataset.tab === 'air') airChart.resize();
        });
      });
    </script>
  </body>
</html>
